<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
	<!-- Bootstrap Bundle (includes Popper.js) -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"
		integrity="sha512-LhccdVNGe2QMEfI3x4DVV3ckMRe36TfydKss6mJpdHjNFiV07dFpS2xzeZedptKZrwxfICJpez09iNioiSZ3hA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<link rel="stylesheet" href="style.css">
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
	<div id="app">
		<header>
			<!-- place navbar here -->
			<div class="center-content">
				<img class="card-img-top logo-sm" src="https://raw.githubusercontent.com/Paciente8159/uCNC/master/docs/logo.png"
					alt="µCNC logo">
				<h1>µCNC configuration generator v2</h1>
				<alert label="Important notice" labelcolor="darkred" alerttype="danger">Config files of the older web builder will not work correctly</alert>
				<alert label="Issues" labelcolor="black" alerttype="primary">If you encounter any issue please consider
					[submiting an issue in the Github project
					page](https://github.com/Paciente8159/uCNC-config-builder/issues/new), with an
					attached zip with all the override files and the json config file.</alert>
			</div>
		</header>
		<main>
			<tabgroup id="my-tabs">
				<tab id="basic-config" label="Basic Configuration" tabid="my-tabs" active>
					<div class="mb-3">
						<p>Hi there,</p>
						<p>Welcome to µCNC basic configuration generator.</p>
					</div>

					<controlgroup label="Previous configuration settings">
						<div class="mb-3 load-config">
							<p>If you have a previous stored build configuration file (json) you can load it.</p>
							<input class="form-control form-control" id="load_settings" type="file" accept=".json,.txt">
						</div>
					</controlgroup>

					<controlgroup label="Basic settings">

						<combobox name="VERSION" label="What version will you be using?" :opts="app_options.VERSIONS" keyname="tag"
							valname="id"></combobox>

						<combobox name="MCU" label="What MCU family will you be using?" :opts="app_options.MCUS" keyname="id"
							valname="name" configfile="boardmap"></combobox>

						<combobox name="KINEMATIC" label="What type of kinematic does your machine have?"
							:opts="app_options.KINEMATICS" keyname="id" valname="name" configfile="boardmap"></combobox>

						<toggle name="MP_SCARA" label="Is MP Scara. In MP SCARA both shoulder and elbow
							motors are fixed to the base." if="app_state.KINEMATIC=='KINEMATIC_SCARA'"></toggle>

						<range name="AXIS_COUNT" label="How many axis does your machine have?" min="1" max="6" step="1"
							configfile="boardmap" initial="3"></range>

						<combobox name="BAUDRATE" label="What is your COM port baudrate" :opts="app_options.BAUDRATES" keyname="id"
							valname="id" configfile="boardmap"></combobox>

						<toggle name="ENABLE_COOLANT" label="Enable coolant" configfile="hal"></toggle>

					</controlgroup>

					<controlgroup label="Advanced settings">

						<toggle name="ENABLE_WIFI" label="Enable Wifi" configfile="boardmap"
							tooltip="Available for boards with Wifi (ex: ESP32, RP2040W, etc..)"></toggle>

						<toggle name="ENABLE_BLUETOOTH" label="Enable Bluetooth" configfile="boardmap"
							tooltip="Available for boards with Bluetooth (ex: ESP32, RP2040W, etc..)"></toggle>

						<toggle name="ENABLE_STEPPERS_DISABLE_TIMEOUT" label="Enable stepper idle timeout" configfile="boardmap"
							tooltip="Enables setting $1 to turn off steppers after some idle time"></toggle>

						<toggle name="ENABLE_SKEW_COMPENSATION" label="Enable X-Y-Z axis skew
							compensation" configfile="hal"></toggle>

						<check name="SKEW_COMPENSATION_XY_ONLY" label="Enable skew compensation for
								X-Y axis only" configfile="hal" show="app_state.ENABLE_SKEW_COMPENSATION"></check>

						<toggle name="ENABLE_LINACT_PLANNER" label="Enable linear actuator planner"
							tooltip="This modifies the motion acceleration to support hard direction changes in machines with heavy mobile parts"
							configfile="hal"></toggle>

						<check name="ENABLE_LINACT_COLD_START" label="Linear actuator cold start"
							tooltip="This forces a stop on every direction change" configfile="hal"
							show="app_state.ENABLE_LINACT_PLANNER"></check>

						<toggle name="ENABLE_BACKLASH_COMPENSATION" label="Enable backlash compensation" configfile="hal"></toggle>

						<combobox name="ENABLE_S_CURVE_ACCELERATION" label="Enable S-Curve
							acceleration" :opts="app_options.ACCELERATIONS" keyname="id" valname="name" configfile="boardmap" initial="0">
						</combobox>

						<toggle name="BRESENHAM_16BIT" label="Use 16-bit Bresenham step generation" configfile="hal"
							tooltip="Uses a 16-bit algorithm that is faster to compute. Good for machines/or processes that require lots of short length motions like deltas or laser engraving">
						</toggle>

						<toggle name="ENABLE_PIN_DEBUG_EXTRA_CMD" label="Enable extra pin state print commands" configfile="hal"
							tooltip="Enables $P command to print all pins states, stepping positions, encoders positions and system runtime">
						</toggle>

						<toggle name="ENABLE_EXTRA_SETTINGS_CMDS" label="Enable extra settings storage commands" configfile="hal"
							tooltip="Enables commands $SS (Save settings to storage), $SL (Load settings from storage), $SR (Reset settings from storage). This is a great for granullar settings read/write control, specially in Flash storaged settings.">
						</toggle>

						<toggle name="RAM_ONLY_SETTINGS" label="Disables settings storage" configfile="hal"
							tooltip="Disables settings storage. Settings are only kept in RAM and get restored on every power cycle.">
						</toggle>

						<range name="STATUS_AUTOMATIC_REPORT_INTERVAL" label="Automatic
							status report frequency: " min="0" max="1000" step="50" units="ms" configfile="boardmap" initial="0"
							tooltip="Enables automatic status report with a set frequency. This can improve the update rate on your GUI. Values bellow 100ms will have no effect (off)">
						</range>

						<toggle name="ENABLE_G39_H_MAPPING" label="Enable height map generation" configfile="hal"
							tooltip="Enables the creation of height maps that are stored internally and can be reusable.">
						</toggle>

						<range name="H_MAPING_GRID_FACTOR" label="Height map grid factor: " min="2" max="6" step="1" units=""
							configfile="hal" if="app_state.ENABLE_G39_H_MAPPING" initial="2"
							tooltip="Sets the height map number of points. The number of points is [grid factor]^2">
						</range>

						<toggle name="ENABLE_CANNED_CYCLES" label="Enable canned cycles subset" configfile="hal"
							tooltip="Enables canned cycles (subset). G84 is not implemented.">
						</toggle>

						<toggle name="ENABLE_RS274NGC_EXPRESSIONS" label="Enable expression parsing and
							numbered parameters" configfile="hal" tooltip="Enables RS274NGC expressions.">
						</toggle>
						<check name="ENABLE_NAMED_PARAMETERS" label="Enable named parameters" configfile="hal"
							tooltip="This option enables a subset of named parameters. Example &lt_x&gt.
							Read more about it in [LinuxCNC named parameters](https://linuxcnc.org/docs/html/gcode/overview.html#gcode:named-parameters)
							The list of supported name parameters can be found [here](https://github.com/Paciente8159/uCNC/blob/67ded74286b4c7b89f4f4d9cefce221bf577a163/uCNC/src/core/parser_expr.c#L51)" initial=true
							if="app_state.ENABLE_RS274NGC_EXPRESSIONS">
						</check>
						<check name="ENABLE_O_CODES" label="Enable OCodes (Sub routines)" configfile="hal"
							tooltip="This option enables OCodes sub routines. µCNC sub routines require some sort of file system mounted (like SD card).
							A sub routine should be place in a file in the root of the drive with extension .nc and the name of the OCode (example O100.nc).
							To call that sub routine you can perform a O100 CALL command. OCode files do should contain the sub routine code only.
							The Sub routine file self contains the routine, so you don't need to start the sub routine with O100 SUB and end with O100 ENDSUB. You can read more about [OCodes here](https://linuxcnc.org/docs/html/gcode/o-code.html)"
							initial=true if="app_state.ENABLE_RS274NGC_EXPRESSIONS">
						</check>

					</controlgroup>

				</tab>
				<tab id="boardmap-config" label="Board" tabid="my-tabs">
					<controlgroup label="Basic board settings">

						<combobox name="BOARD" label="What board will you be using?" :opts="app_options.BOARDS" keyname="id"
							valname="name" filter="item.mcu.includes(app_state.MCU)"></combobox>
						<alert alerttype="info" labelcolor="var(--bs-alert-color)" label="Advanced configurations">
							Custom boards might require aditional settings that may not be available in this tool.

								**Check the Custom configurations tab**
								Also might require either a different
								base board selection on the ini file
								(PlatformIO) or a board type (Arduino IDE). Please refer to the architecture
								documentation or submit a question on Github
								about custom boards.
						</alert>
					</controlgroup>

					<controlgroup label="Advanced settings">

						<toggle name="ENABLE_WIFI" label="Enable Wifi" configfile="boardmap"
							tooltip="Available for boards with Wifi (ex: ESP32, RP2040W, etc..)"></toggle>

						<toggle name="ENABLE_BLUETOOTH" label="Enable Bluetooth" configfile="boardmap"
							tooltip="Available for boards with Bluetooth (ex: ESP32, RP2040W, etc..)"></toggle>

						<toggle name="ENABLE_STEPPERS_DISABLE_TIMEOUT" label="Enable stepper idle timeout" configfile="boardmap"
							tooltip="Enables setting $1 to turn off steppers after some idle time"></toggle>

						<toggle name="ENABLE_SKEW_COMPENSATION" label="Enable X-Y-Z axis skew
							compensation" configfile="hal"></toggle>

						<check name="SKEW_COMPENSATION_XY_ONLY" label="Enable skew compensation for
								X-Y axis only" configfile="hal" show="app_state.ENABLE_SKEW_COMPENSATION"></check>

						<toggle name="ENABLE_LINACT_PLANNER" label="Enable linear actuator planner"
							tooltip="This modifies the motion acceleration to support hard direction changes in machines with heavy mobile parts"
							configfile="hal"></toggle>

						<check name="ENABLE_LINACT_COLD_START" label="Linear actuator cold start"
							tooltip="This forces a stop on every direction change" configfile="hal"
							show="app_state.ENABLE_LINACT_PLANNER"></check>

						<toggle name="ENABLE_BACKLASH_COMPENSATION" label="Enable backlash compensation" configfile="hal"></toggle>

						<combobox name="ENABLE_S_CURVE_ACCELERATION" label="Enable S-Curve
							acceleration" :opts="app_options.ACCELERATIONS" keyname="id" valname="name" configfile="boardmap" initial="0">
						</combobox>

						<toggle name="BRESENHAM_16BIT" label="Use 16-bit Bresenham step generation" configfile="hal"
							tooltip="Uses a 16-bit algorithm that is faster to compute. Good for machines/or processes that require lots of short length motions like deltas or laser engraving">
						</toggle>

						<toggle name="ENABLE_PIN_DEBUG_EXTRA_CMD" label="Enable extra pin state print commands" configfile="hal"
							tooltip="Enables $P command to print all pins states, stepping positions, encoders positions and system runtime">
						</toggle>

						<toggle name="ENABLE_EXTRA_SETTINGS_CMDS" label="Enable extra settings storage commands" configfile="hal"
							tooltip="Enables commands $SS (Save settings to storage), $SL (Load settings from storage), $SR (Reset settings from storage). This is a great for granullar settings read/write control, specially in Flash storaged settings.">
						</toggle>

						<toggle name="RAM_ONLY_SETTINGS" label="Disables settings storage" configfile="hal"
							tooltip="Disables settings storage. Settings are only kept in RAM and get restored on every power cycle.">
						</toggle>

						<range name="STATUS_AUTOMATIC_REPORT_INTERVAL" label="Automatic
							status report frequency: " min="0" max="1000" step="50" units="ms" configfile="boardmap" initial="0"
							tooltip="Enables automatic status report with a set frequency. This can improve the update rate on your GUI. Values bellow 100ms will have no effect (off)">
						</range>

						<toggle name="ENABLE_G39_H_MAPPING" label="Enable height map generation" configfile="hal"
							tooltip="Enables the creation of height maps that are stored internally and can be reusable.">
						</toggle>

						<range name="H_MAPING_GRID_FACTOR" label="Height map grid factor: " min="2" max="6" step="1" units=""
							configfile="hal" if="app_state.ENABLE_G39_H_MAPPING" initial="2"
							tooltip="Sets the height map number of points. The number of points is [grid factor]^2">
						</range>

						<toggle name="ENABLE_CANNED_CYCLES" label="Enable canned cycles subset" configfile="hal"
							tooltip="Enables canned cycles (subset). G84 is not implemented.">
						</toggle>

						<toggle name="ENABLE_RS274NGC_EXPRESSIONS" label="Enable expression parsing and
							numbered parameters" configfile="hal" tooltip="Enables RS274NGC expressions.">
						</toggle>
						<check name="ENABLE_NAMED_PARAMETERS" label="Enable named parameters" configfile="hal"
							tooltip="This option enables a subset of named parameters. Example &lt_x&gt.
							Read more about it in [LinuxCNC named parameters](https://linuxcnc.org/docs/html/gcode/overview.html#gcode:named-parameters)
							The list of supported name parameters can be found [here](https://github.com/Paciente8159/uCNC/blob/67ded74286b4c7b89f4f4d9cefce221bf577a163/uCNC/src/core/parser_expr.c#L51)" initial=true
							if="app_state.ENABLE_RS274NGC_EXPRESSIONS">
						</check>
						<check name="ENABLE_O_CODES" label="Enable OCodes (Sub routines)" configfile="hal"
							tooltip="This option enables OCodes sub routines. µCNC sub routines require some sort of file system mounted (like SD card).
							A sub routine should be place in a file in the root of the drive with extension .nc and the name of the OCode (example O100.nc).
							To call that sub routine you can perform a O100 CALL command. OCode files do should contain the sub routine code only.
							The Sub routine file self contains the routine, so you don't need to start the sub routine with O100 SUB and end with O100 ENDSUB. You can read more about [OCodes here](https://linuxcnc.org/docs/html/gcode/o-code.html)"
							initial=true if="app_state.ENABLE_RS274NGC_EXPRESSIONS">
						</check>

					</controlgroup>

				</tab>
			</tabgroup>
		</main>
	</div>
	<script src="options.js"></script>
	<script src="controls.js"></script>
	<script src="containers.js"></script>
	<script>
		// Vue.config.devtools = true;
		const { createApp } = Vue;
		window.appInstance = createApp({
			components: {
				'toggle': ToggleComponent,
				'check': CheckComponent,
				'combobox': ComboBoxComponent,
				'range': RangeComponent,
				'alert': AlertComponent,
				'controlgroup': ControlGroupComponent,
				'tabgroup': TabGroupComponent,
				'tab': TabComponent,
			},
			data() {
				return app_vars;
			},
		}).mount('#app')
	</script>
	<!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
		integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
		</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
		crossorigin="anonymous"></script> -->
</body>

</html>